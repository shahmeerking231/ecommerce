<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hello Admin <%= user.username %></title>
    <%- include('./partials/daisyui.ejs') %>
  </head>
  <body class="bg-base-200">
    <%- include('./partials/navbar.ejs') %>
    <main class="p-6 min-h-[70vh]">
      <div>
        <h2 class="text-2xl font-semibold mb-6">Products</h2>
      </div>
      <%- include('./partials/productDisplay.ejs') %>
    </main>
    <footer class="mt-8">
      <hr class="my-6" />
      <p class="text-center text-gray-500">
        &copy; <%= new Date().getFullYear() %> ShahmeerJS . All rights reserved.
      </p>
    </footer>
    <%- include('./partials/script.ejs') %>
    <script>
      function deleteProduct(productId) {
        console.log(productId);
        if (confirm("Are you sure you want to delete this product?")) {
          fetch(`/products/${productId}`, {
            method: "DELETE",
          })
            .then((response) => response.json())
            .then((data) => {
              console.log(data);

              if (data.success) {
                window.location.reload();
              } else {
                toast(data.message, "error");
              }
            })
            .catch((error) => {
              console.error("Error:", error);
              toast(error.message, "error");
            });
        }
      }
      function editProduct(product) {
        if (localStorage.getItem("product")) {
          localStorage.removeItem("product");
        }
        localStorage.setItem("product", product);
        location.href = "/edit";
      }
    </script>
    <%- include('./partials/errorHandle.ejs') %>
  </body>
</html>
